使用者 ChatWeb前台 輸入語句後會打向產品後台(Flow)，再分別由NLU和FAQ辨識語意意圖，Flow會依據辨識結果走不同流程，流程中如有邏輯判斷或是打電文時就會進到TPIGateway，用戶也可以轉真人客服系統，透過客服後台跟chatWeb讓客服專員提供服務

User問題->Flow->TPI GW->會通知真人客服後台(會記錄已連通真人客服的狀態)
->真人客服回復(LU/FAQ的建議回復)->User
如果再問第二個問題的話會繼續再跑一次流程，系統設計上是非同步處理，ChatWeb排程會一req直到有回復
每次真人客服的問訊息在傳送給Chatweb對話都會Flow記錄起來
ChatWeb api->Flow->ChatWeb->User

MMB介面用SDK呈現，flow只留入口，後續的流程控制由mmbtpi的程式來控制，結構上會比webtpi還要複雜及龐大。


-----------------------------


用戶端走SSL通訊協定進入，看用戶端使用的平台，如果是WEB或LINEBC就對應ChatWeb AP1和2，如果來源是MMB或企網銀對應的伺服器MMBChatWeb AP1和2
透過F5及VIP來避免其中一台機器服務停止、故障導致服務中斷，F5附載均衡設備對伺服器做健檢，記入伺服器檢查結果，根據結果決定請求發送那哪台伺服器最好。

Mongo 1主要資料庫是為一被寫入的節點，Mongo 2為次要資料庫，內容是由主要資料庫複製而來，主資料庫發生問題，經選舉後，可變成新任主要資料庫，Mongo 3為複製集仲裁者，此資料庫沒有資料，所以不能變成主資料庫，會參與主要資料庫選舉的投票。
Postgresql1 主要資料，透過WAL(Write-Ahead Logging)機制複製到Postgresql2、3。


LineBC(Business Connect)
Systalk 產品
真人客服 軟體安裝JBoss7 Elasticsearch

SSL通訊協定(加密式網際網路安全性通訊協定，非對稱加密加密與解密使用不同的密碼。)
使用者進到網站後，要求伺服器執行身分驗證，檢視伺服器是否可信任。
伺服器向使用者發送SSL憑證副本和公鑰，以證明資料安全性。
使用者檢視SSL憑證的可信度，確認後以伺服器的公鑰加密訊息回傳，並附上自己的公鑰。
雙方之間的訊息都以對方的公鑰加密，用各自的私鑰解密，確保安全。


透過設定F5及VIP來避免其中一台機器服務停止、故障導致服務中斷，F5附載均衡設備對伺服器做健檢，記入伺服器檢查結果，根據結果決定請求發送那哪台伺服器最好。


-----------------------

NLU運用自然語言理解技術，進行意圖分類(Intent)、Entity(實體識別)，目的讓機器聽懂人類語言。
Intent — 意圖分類：判斷使用者提出的需求當使用者提出需求時，就會根據NLU演算法分解該語句詞彙、再定位於多維向量空間中，並使用分類模型判斷使用者的服務意圖。
 
Entity — 實體識別：抓取服務流程的必備資訊
可是識別對話內容哪個字/詞是實體資訊(eg.台北)，判斷指哪個實體項目(台北→地點)，才能正確提供服務。

FAQ專門處理已有固定回答的諮詢服務，NLU則負責個人化查詢。


----------------------------


三維判斷機制 FAQ專業 ->1st bot總機 ->1st bot服務台 -> 1st bot FAQ 閒聊 -> 1st bot NLU/FAQ推薦
未達門檻值，有達到次門檻值，判斷語料是否能猜測為某個FAQ題組並進行推薦/反問

有些問題進 FAQ專業 ->答案是否有值 (會有沒值的狀態) ->1st bot總機

每次文字回復都會再重新進到三維判斷機制

如果進入 2nd bot 部門 -> 是否有前次流程 - yes ->
範例 : 詢問信用卡


-------------------------