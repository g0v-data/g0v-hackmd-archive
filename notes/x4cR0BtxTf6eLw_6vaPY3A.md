---
tags: digital-resilience, resilience, internet-shutdown, digiresi, civil-defense, 民防, 數位韌性松, DigiResiTh0n, hackathon, civil defense, 
---
# 重要數位服務韌性檢測及其替代品
###### tags: digital-resilience

```
在天災人禍導致「台灣對外斷網」時，希望能盡量維持正常運作的重要網路服務。
```

**情境：** 2023年初，馬祖的對外海纜被中國的拖網漁船/挖沙船「意外」挖斷，因而斷網長達一週。 假設此一情境發生在台灣，台灣對外網路骨幹的海纜斷了八九成（甚至完全中斷），推估需要一個月以上才能恢復的話，有哪些服務，是維持*基本生活品質*必要的服務，應在「只有島內網路」的狀態下維持正常運作？

**範疇：** 國民第一線會使用的「網路服務」、「手機 APP」。

> 不納入實體離線服務如 7-11 店面與捷運⋯⋯等。也不列入各消費端服務的上游相關設施（如 EC 網站的物流，我們期待該網站能與其供應鏈上下游協作，推行進一步的韌性計畫）

**倡議：** 民生必需的服務，應備有對外網路嚴重障礙的緊急應變計劃，並且定期進行相關的演練。


---

## 重要民生網站與數位服務

### 搜尋引擎

|||
|---|---|
| Google | google.com |
| Yahoo奇摩 | yahoo.com |
| Bing | bing.com |


### 新聞

|||
|---|---|
| 中央社 | cna.com.tw |
| 公視 | pts.org.tw |
| 警廣（線上直播） | https://www.pbs.npa.gov.tw/ch/app/programList/list?module=programlist&id=18112 |
| 華視 | cts.com.tw |

<!-- 
|Youtube|youtube.com| 
在災難狀態下，我認為大量耗費流量的線上影音，不太適合列入必要服務 [name=Irvin]
-->

### 流通

|||
|---|---|
| MoMo | www.momoshop.com.tw |
| 蝦皮 | shopee.tw |
| PChome 24 | 24h.pchome.com.tw |

### 生活

|||
|---|---|
| Google Maps (app / web) | maps.google.com |

### 通訊與社群

| Service | Link | Notes |
|-|-|-|
| Line | | （需想辦法檢測其啟動、訊息收發時會運用到的 API）|
| Telegram | tg.me | (同上) |
| Gmail      | mail.google.com | |
| Yahoo Mail | mail.yahoo.com | |
| Ptt | ptt.cc | ssh, web access, api | 


<!-- 本專案納入的範圍為「平常就被大量使用，而災難時希望能維持運作的民生服務」，以下適合災難環境下使用的服務移到:
https://g0v.hackmd.io/_HFiW7HDT9S2lwf02hTJNA?view

| Briar      | briarproject.org | 不需要網際網路，僅靠藍芽即可傳送文字訊息的通訊軟體。初次設定仍需網際網路。 |
| Bridgefy   | bridgefy.me | （同上，但沒開源。） |
-->



### 官方與避難資訊

||| 備註 |
|-|-|-|
| 總統府 | www.president.gov.tw ||
| 國防部 | www.mnd.gov.tw ||
| 內政部 警政署 防空避難專區 | https://adr.npa.gov.tw |  (Website, Google Map) |


### 政府 APP / 金流 / 發票

> 烏克蘭曾經用一些健保APP來推播戰爭資訊，所以可能也能盤點台灣很普及的政府APP  [name=Ronny]

| APP | 主管機關 / link |
| --- | --- | 
| 健保快易通 | 衛服部 | 
| 集保e手掌握 | 臺灣集中保管結算所 | 
| 統一發票兌獎 | 財政部 |
| 發票存摺 | https://apps.apple.com/tw/app/id1276986959 |
| 雲端發票 | https://apps.apple.com/tw/app/id512920023 |
| 臺北市行動防災 | https://www.gov.taipei/News_Content.aspx?n=E913E3AE42428718&sms=5E1F5CB2AD837CAE&s=A96715627B83D676 |
| 消防防災e點通 | https://play.google.com/store/apps/details?id=com.nfa.report&hl=zh_TW&gl=US <br/> https://apps.apple.com/tw/app/%E6%B6%88%E9%98%B2%E9%98%B2%E7%81%BDe%E9%BB%9E%E9%80%9A/id1500403641 |


### 銀行

| 銀行名稱 | 官方下載頁面 |
| --- | --- |
| 國泰世華 | https://www.cathaybk.com.tw/cathaybk/promo/event/ebanking/product/appdownload/index.html |
| 富邦     | https://www.fubon.com/banking/personal/mobile/index.htm                                  |
| 聯邦     | https://play.google.com/store/apps/details?id=wbank.ubot.com.tw&hl=en_US                 |
| 中國信託 | https://play.google.com/store/apps/details?id=com.chinatrust.mobilebank                  |
| 玉山     | https://play.google.com/store/apps/details?id=com.esunbank&hl=zh_TW&gl=US                |
|台銀 |https://play.google.com/store/apps/details?id=com.bot.ibank&hl=zh_TW&gl=US   |
| 台新     | https://play.google.com/store/apps/details?id=tw.com.taishinbank.mobile&hl=zh_TW&gl=US   |
|郵局 |https://play.google.com/store/apps/details?id=tw.gov.post.mpost&hl=zh_TW&gl=US |
|合作金庫|https://www.tcb-bank.com.tw/personal-banking/digital-finance/services/app|
|||
|||
|||
|||
|||

### 對外溝通與宣傳

|||
|-|-|
| X | x.com |
| Facebook | facebook.com |
| Telegram | |
| IG | |
|dcard||
|ptt||

### 工作

| | | |
|-|-|-|
| Google Workspace | | 許多企業運作必須 |
| Microsoft 365 | | 同上 |


---

## 數位服務的基礎建設

> 列入基準：大量民生服務運用的資訊基礎建設與服務。
> 先行調查這些服務是否有落地節點，構成檢測上方民生服務的韌性所需的重要資訊


### 作業系統相關基礎服務

|| notes |
|-|-|
| iCloud | |
| Ubuntu apt mirrors ||
| Firebase | 手機上的 push notification |
|||

> iPhone / mac 運作時會存取（depend）超多 icloud 下的服務（與 api），android / windows 有什麼相對的服務?[name=irvin]

### Cert

如果對外網路中斷時，cert 的機制會有影響嗎？

| 廠商 | 台灣節點 | 備註 | |
|-|-|-|-|
| Digicert | | 憑證驗證商<br> 在檢視 DNS log 時，發現 iPhone / Mac 都對這個憑證商有大量存取，如果無法使用，是否會造成 https 連鎖信任問題？ [name=Irvin] |

### DNS

| | IP | 台灣節點 |
|-|-|-|-|
| Google Public DNS | 8.8.8.8 | ? |
| Hinet DNS | 168.95.1.1 / 168.95.192.1 | Y |


### 雲端平台 / IaaS

| 供應商 | 台灣有節點 | 備註 |
| --- | --- | --- |
| AWS | [Y](https://aws.amazon.com/tw/about-aws/global-infrastructure/localzones/locations/) |
| Azure Edge | [Coming Soon](https://azure.microsoft.com/zh-tw/explore/global-infrastructure/geographies/#geographies) |
| Azure CDN | [Y](https://learn.microsoft.com/zh-tw/azure/cdn/microsoft-pop-abbreviations) |
| Google Cloud Edge | [Y](https://cloud.google.com/about/locations?hl=zh-tw#lightbox-edgepoint-map) |
| Google Cloud CDN | [Y](https://cloud.google.com/about/locations?hl=zh-tw#lightbox-cdn-map) |
| Google App Engine | [?](https://cloud.google.com/appengine/docs/standard/locations) | App Engine 有地區性，Google 的 redundancy 似乎只有在區域內，因此使用者似乎無法確定是否在本地可用 |
| Cloudflare | [Y](https://www.cloudflare.com/zh-tw/network/) |
| Akamai | [Y](https://www.akamai.com/legal/compliance/privacy-trust-center/list-of-countries-with-server-points-of-presence) | | |
| GitHub | ? ([ref](https://github.com/orgs/community/discussions/42169#discussioncomment-4454218)) | 許多軟體資源都在上面，少了它可能有很多緊急建置需求無法達成 |

### SaaS



| 名稱 | 功能 | 替代品 |
| -------- | -------- | -------- |
| Notion | 關連式資料庫、資料庫可以切很多 view | [AppFlowy](https://www.appflowy.io/) is an open-source alternative to Notion. You are in charge of your data and customizations. |
Google Calendar
Amie Calendar App


### 被許多廣泛使用的 framework / service

需要找一些前端 lib 市場數據的資料

https://gist.github.com/tkrotoff/b1caa4c3a185629299ec234d2314e190

https://tsh.io/state-of-frontend/
https://2022.stateofjs.com/en-US/libraries/front-end-frameworks/


| framework | 服務提供的預設網址 | 是否有國內節點 | 備註 |
|---|---|---|---|
| jQuery | code.jquery.com | Fastly / 香港 | |
| React | | |
| Angular | | |
| Vue | | |
| Google Tag Manager | www.googletagmanager.com | ? (Google) | |
| fontawesome | kit.fontawesome.com | Y (Cloudflare) | |
| Adobe (Typekit) | use.typekit.net | | 死掉可能沒差 |
| Google Font | | | 死掉可能沒差 |
| cdnjs | | |
| jsdelivr | | |
| googleapis | ajax.googleapis.com | | [ref](https://developers.google.com/speed/libraries?hl=zh-tw) |
| 已知的 library CND | | |

<!-- 需離線可得或整理與分流的防災資訊移到：https://g0v.hackmd.io/oyNRfe4lTuaZ5RbcPSS7TQ?both#防災知識庫
### 生存

| Service | Line |
| -------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Survival Manual (Offline App)                      | [F-Droid](https://f-droid.org/packages/org.ligi.survivalmanual/), <br />[Google Play Store](https://play.google.com/store/apps/details?id=org.ligi.survivalmanual), <br />[Amazon appstore](https://www.amazon.com/ligi-Survival-Manual/dp/B06WW43R3T). |
-->


---

## 服務韌性檢測方式（wip）

- 檢查網站 hosting 主機 
    - 所在地 & API 所在地
        - 位置：國內 / 國外
        - 是否是 anycast，且提供國內節點
- 檢查網站頁面 & API 是否通過 CDN
    - CDN 是否是已知有落地的單位
        - cloudflare (TPE)
        - Akamai
- 檢查網站使用的 library (jquery, anguler, vue... etc)
    - 是否使用公共的 CDN
        - 是否已知有落地
        - cdnjs (over cloudflare)
        - jsdelivr?
    - 是否與網站一起 serve

### 人工檢測紀錄

以 Pchome 產品頁為例 （ https://24h.pchome.com.tw/prod/DCAYAD-A900BIAMV ）

1. 先打開 adblock / adguard，把不必要的元素都預先擋掉
2. 打開瀏覽器開發工具，停用快取，載入頁面
3. 切到 network，用 HAR 檔存下完整的 request 紀錄 
    - 完整 request 紀錄: https://gist.github.com/irvin/8d7527636528fcb64ce2dc6b63679da3

4. 資料整理

    > - vscode 搜索 HAR `"url": "(.*)"` 抓出所有的 requests
    > - 按照 hostname 排序，同一個 sub-domain 只留一條 

    - 可直接丟掉的 requests 們
        - analytics:
            - `analytics.google.com`
            - `play.google.com/log`
            - `www.google-analytics.com`
        - fb: 
            - `connect.facebook.net`
            - `www.facebook.com`
        - 字體:
            - `fonts.gstatic.com`
        - ad:
            - `*.doubleclick.net`
            - `www.google.com.tw/ads`

5. 檢視 HAR entries 下的每一個 request 項目是否有境內可用性，以[第一項](https://gist.github.com/irvin/8d7527636528fcb64ce2dc6b63679da3#file-24h-pchome-com-tw_archive-24-02-24-15-39-25-har-L29) `https://24h.pchome.com.tw/prod/DCAYAD-A900BIAMV` 為例


    a. 確認資源 IP
        
            ➜  ~ ping 24h.pchome.com.tw
            PING shopping.gs1.pchome.com.tw (34.149.253.14): 56 data bytes
            64 bytes from 34.149.253.14: icmp_seq=0 ttl=61 time=20.640 ms
            
    b. 確認該 IP 資訊 https://ipinfo.io/34.149.253.14
        
            Summary
            ASN 	AS396982 - Google LLC
            Hostname 	14.253.149.34.bc.googleusercontent.com
            Range 	34.148.0.0/14
            Company 	Google LLC
            Hosted domains 	31
            Privacy 	True
            Anycast 	True
            ASN type 	Hosting
            Abuse contact 	google-cloud-compliance@google.com
            
    c. 檢視 ASN / Hostname 是 GCP，對照 [#雲端平台--IaaS--SaaS](https://g0v.hackmd.io/x4cR0BtxTf6eLw_6vaPY3A?both#雲端平台--IaaS--SaaS) 確認其有台灣節點，在「是否可及」內紀錄（可及打 O / 不可及打 X / 不明打 ?）
        

6. 該頁所有 request 列表於下:

    | # | 是否可及 | location | URI |
    | - | ------ | -------- | -------- |
    | 1 | O | GCP | `https://24h.pchome.com.tw/prod/DCAYAD-A900BIAMV` |
    | 2 | ? | Google App Engine |  `https://web-market-349104.de.r.appspot.com/g/collect?v=2&tid=G-1234&gtm=45je42l0za220&_p=1708759832896&gcd=13l3l3l3l1&npa=0&dma=0&cid=1921541364.1708759817&ul=zh-tw&sr=1352x878&ur=TW-TPE&pscdl=noapi&sst.uc=TW&sst.etld=google.com.tw&sst.gcd=13l3l3l3l1&sst.tft=1708759832896&_s=1&sid=1708759820&sct=1&seg=1&dl=https%3A%2F%2F24h.pchome.com.tw%2Fprod%2FDCAYAD-A900BIAMV&dt=GRADO%20Prestige%20%E7%B3%BB%E5%88%97%20SR80x%20%E9%96%8B%E6%94%BE%E5%BC%8F%E8%80%B3%E7%BD%A9%E8%80%B3%E6%A9%9F%20-%20PChome%2024h%E8%B3%BC%E7%89%A9&en=user_engagement&ep.server_side_event=true&_et=2016&tfd=115832`|
    | 3 | O | Akamai |  `https://cs-a.ecimg.tw/items/DCAYADA900BIAMV/000001_1705372221.jpg`|
    | 4 | _ | _ |  `https://jnn-pa.googleapis.com/$rpc/google.internal.waa.v1.Waa/Create`|
    | 5 | _ | _ |  `https://play.google.com/log?format=json&hasfast=true&authuser=0`|
    | 6 | _ | _ |  `https://www.google.com/js/th/QGccEJWqd_gIzr4UnyRjJu4DFpzUq3q8RcWI0eePlNs.js`|
    | 7 | _ | _ |  `https://www.googletagmanager.com/a?v=3&t=l&pid=465103988&rv=42l0&u=AAAAAAAIAAAAAIAI&ut=Ag&h=Ag&gtm=45je42l0v872609635za220&ccid=72609635&cid=G-9CE1X6J1FG&l=L251.S13.B11.E6031.I251.EC9.TC20.HTC0~gtm.init.S1.V1.E64.TS5ogtcrossdomain.TI113.TE1.TS5ogtreferralexclusion.TI115.TE1.TS5ogtipmark.TI116.TE1.TS5ogtautoevents.TI117.TE1.TS5ogt1pdatav2.TI118.TE0.TS5ccdgalast.TI119.TE0.TS5ccdautoredact.TI120.TE1.TS5ccdconversionmarking.TI121.TE0.TS5ccdemvideo.TI122.TE0.TS5ccdemsitesearch.TI123.TE0.TS5ccdemscroll.TI124.TE1.TS5ccdempageview.TI125.TE0.TS5ccdemoutboundclick.TI126.TE0.TS5ccdemdownload.TI127.TE0.TS5ccdgaregscope.TI128.TE0.TS5ogtgooglesignals.TI129.TE1.TS5ccdgaadslink.TI130.TE0.TS5setproductsettings.TI131.TE0.TS5ccdgafirst.TI132.TE0~gtm.js.S0.V0.E56.TS5gct.TI110.TE0~gtm.dom.S1.V1.E8~gtm.elementVisibility.S0.V0.E7~gtm.elementVisibility.S0.V0.E7~*.S1.V0.E1~gtm.load.S1.V1.E4~gtm.scrollDepth.S0.V0~gtm.init_consent.S0.V0.E17~GA1873`|
    | 8 | _ | _ |  `https://yt3.ggpht.com/ytc/AIf8zZSx8tbakn07GnSTMfSuhxvk02L73EOM0P4BcugdyQ=s68-c-k-c0x00ffffff-no-rj`|
    | 9 | _ | _ |  `https://24h.pchome.com.tw/cdn/switch/v1/config`|
    | 10 | _ | _ |  `https://apid.pcloud.tw/venapis/vengu`|
    | 11 | _ | _ |  `https://assets.pchome.com.tw/production/ecweb/build/static/css/main.06faf475.css`|
    | 12 | _ | _ |  `https://ecapi-cdn.pchome.com.tw/cdn/ecshop/cateapi/v1.5/store&id=DCAYAD&_callback=jsonp_storestyle?_callback=jsonp_storestyle`|
    | 13 | _ | _ |  `https://ecssl-cart.pchome.com.tw/cart/index.php/prod/modify?data={%22TB%22:%2224H%22}&callback=jsonp_modshopcart&1708759949&_callback=jsonp_modshopcart`|
    | 14 | _ | _ |  `https://engage.pchome.com.tw/?eventName=pageView&eventId=21974ba3-8ada-4019-b67c-7cd1ea6edebb&timestamp=1708759949535&deviceCategory=web.desktop&userAgent=Mozilla%2F5.0%20(Macintosh%3B%20Intel%20Mac%20OS%20X%2010.15%3B%20rv%3A124.0)%20Gecko%2F20100101%20Firefox%2F124.0&deviceId=3402a870-92f6-4b07-aadf-a49156027375&userId=null&sessionId=9d825506-1781-4870-b682-efbce46898ca&pageType=prod&pageId=DCAYAD-A900BIAMV&pageName=GRADO%20Prestige%20%E7%B3%BB%E5%88%97%20SR80x%20%E9%96%8B%E6%94%BE%E5%BC%8F%E8%80%B3%E7%BD%A9%E8%80%B3%E6%A9%9F%20-%20PChome%2024h%E8%B3%BC%E7%89%A9&pageUrl=https%3A%2F%2F24h.pchome.com.tw%2Fprod%2FDCAYAD-A900BIAMV&pageReferrer=`|
    | 15 | _ | _ |  `https://eventapi.pchome.com.tw/g/collect?v=2&tid=G-9876543210&gtm=45je42l0z879197709za200&_p=1708759948669&gcd=13l3l3l3l1&npa=0&dma=0&cid=1921541364.1708759817&ul=zh-tw&sr=1352x878&ur=TW-TPE&pscdl=noapi&sst.uc=TW&sst.etld=google.com.tw&sst.gcd=13l3l3l3l1&sst.tft=1708759948669&_s=1&sid=1708759817&sct=1&seg=1&dl=https%3A%2F%2F24h.pchome.com.tw%2Fprod%2FDCAYAD-A900BIAMV&dt=GRADO%20Prestige%20%E7%B3%BB%E5%88%97%20SR80x%20%E9%96%8B%E6%94%BE%E5%BC%8F%E8%80%B3%E7%BD%A9%E8%80%B3%E6%A9%9F%20-%20PChome%2024h%E8%B3%BC%E7%89%A9&en=page_view&ep.event_id=a95136d4-c15d-44ef-9f88-c04bdf2c2956_1708759948669.1&ep.event_name=PageView&ep.x-fb-ck-fbp=fb.2.1708759824862.460376396&tfd=3181&richsstsse`|
    | 16 | _ | _ |  `https://img.pchome.com.tw/cs/items/DCAYADA900BIAMV/i010001_1624876051.jpg`|
    | 17 | _ | _ |  `https://kdpic.pchome.com.tw/img/js/xasynpcadshow.js`|
    | 18 | _ | _ |  `https://libs.pcloud.tw/js/current/venraaspt.min.js?_=19777`|
    | 19 | _ | _ |  `https://pchome24h.api.useinsider.com/ins.js?id=10005204`|
    | 20 | _ | _ |  `https://i.ytimg.com/vi/EB75v95vLV0/hqdefault.jpg?sqp=-oaymwEmCOADEOgC8quKqQMa8AEB-AHUBoAC4AOKAgwIABABGGUgTyg_MA8=&rs=AOn4CLCMKP3lMRUOiObHI0RqSJtZmuwdug`|
    | 21 | _ | _ |  `https://www.youtube.com/embed/EB75v95vLV0`|
