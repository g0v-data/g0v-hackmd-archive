P(A) ≥ 0, for every event A
```

2. **可加性 (Additivity)**
```
   若 A ∩ B = ∅，則 P(A ∪ B) = P(A) + P(B)
   
   一般形式：P(A₁ ∪ A₂ ∪ ...) = P(A₁) + P(A₂) + ...
```

3. **正規性 (Normalization)**
```
   P(Ω) = 1
```

---

### **1.3 重要機率性質**

1. **若 A ⊂ B**
```
   P(A) ≤ P(B)
```

2. **聯集機率**
```
   P(A ∪ B) = P(A) + P(B) - P(A ∩ B)
```

3. **聯集上界**
```
   P(A ∪ B) ≤ P(A) + P(B)
```

4. **三事件聯集**
```
   P(A ∪ B ∪ C) = P(A) + P(Aᶜ ∩ B) + P(Aᶜ ∩ Bᶜ ∩ C)
```

---

### **1.4 離散機率 (Discrete Probability)**

**離散均勻分佈 (Discrete Uniform)**
```
P(A) = (A中元素個數) / n
```
其中 n 為樣本空間中等可能結果總數

**一般離散**
```
P({s₁, s₂, ..., sₙ}) = P(s₁) + P(s₂) + ... + P(sₙ)
```

---

### **1.5 條件機率 (Conditional Probability)**

**定義**
```
P(A | B) = P(A ∩ B) / P(B),  P(B) > 0
```

**等可能結果時**
```
P(A | B) = (A ∩ B 的元素個數) / (B 的元素個數)
```

**重要性質**
- 條件機率本身也是機率法則
- 所有機率性質都適用於條件機率

---

### **1.6 全機率定理 (Total Probability Theorem)**

若 A₁, ..., Aₙ 為樣本空間的分割 (partition)，且 P(Aᵢ) > 0，則：
```
P(B) = P(A₁ ∩ B) + ... + P(Aₙ ∩ B)
     = P(A₁)P(B | A₁) + ... + P(Aₙ)P(B | Aₙ)
```

---

### **1.7 貝氏定理 (Bayes' Rule)**
```
P(Aᵢ | B) = P(Aᵢ)P(B | Aᵢ) / [P(A₁)P(B | A₁) + ... + P(Aₙ)P(B | Aₙ)]
```

**應用：更新信念（從先驗到後驗）**

---

### **1.8 獨立性 (Independence)**

**兩事件獨立**
```
P(A ∩ B) = P(A)P(B)

等價於（當 P(B) > 0）：
P(A | B) = P(A)
```

**條件獨立**
```
P(A ∩ B | C) = P(A | C)P(B | C)
```

**n個事件獨立**
```
P(⋂ᵢ∈S Aᵢ) = ∏ᵢ∈S P(Aᵢ)
對所有子集 S ⊆ {1,2,...,n} 成立
```

⚠️ **重要：** 獨立性 ≠ 條件獨立性

---

### **1.9 計數原理 (Counting)**

**乘法原理**
```
n₁ × n₂ × ... × nᵣ
```

**重要公式**

1. **排列 (Permutations)**
```
   n! = n × (n-1) × ... × 1
```

2. **k-排列**
```
   n!/(n-k)!
```

3. **組合 (Combinations)**
```
   C(n,k) = (n choose k) = n! / [k!(n-k)!]
```

4. **分割 (Partitions)**
```
   n! / (n₁! n₂! ... nᵣ!)
```

---

## 🎲 Chapter 2: Discrete Random Variables

### **2.1 基本定義**

**隨機變數 (Random Variable)**
- 實驗結果的實值函數
- X: Ω → ℝ

**離散隨機變數**
- 只能取有限或可數無限個值

---

### **2.2 機率質量函數 (PMF)**

**定義**
```
pₓ(x) = P(X = x)
```

**性質**
```
∑ₓ pₓ(x) = 1
pₓ(x) ≥ 0
```

**計算步驟**
1. 收集所有使 X = x 的結果
2. 加總這些結果的機率

---

### **2.3 期望值 (Expectation)**

**定義**
```
E[X] = ∑ₓ x·pₓ(x)
```

**函數的期望值規則**
```
E[g(X)] = ∑ₓ g(x)·pₓ(x)
```

**線性性質**
```
E[aX + b] = aE[X] + b
```

---

### **2.4 變異數 (Variance)**

**定義**
```
var(X) = E[(X - E[X])²]
       = ∑ₓ (x - E[X])²·pₓ(x)
```

**計算公式**
```
var(X) = E[X²] - (E[X])²
```

**標準差**
```
σₓ = √var(X)
```

**線性變換**
```
若 Y = aX + b，則：
E[Y] = aE[X] + b
var(Y) = a²var(X)
```

---

### **2.5 聯合PMF (Joint PMF)**

**定義**
```
pₓ,ᵧ(x, y) = P(X = x, Y = y)
```

**邊際PMF (Marginal PMF)**
```
pₓ(x) = ∑ᵧ pₓ,ᵧ(x, y)
pᵧ(y) = ∑ₓ pₓ,ᵧ(x, y)
```

**函數的期望值**
```
E[g(X,Y)] = ∑ₓ ∑ᵧ g(x,y)·pₓ,ᵧ(x,y)
```

**線性性**
```
E[aX + bY + c] = aE[X] + bE[Y] + c
```

---

### **2.6 條件PMF**

**定義**
```
pₓ|ᵧ(x | y) = P(X = x | Y = y) = pₓ,ᵧ(x,y) / pᵧ(y)
```

**條件期望值**
```
E[X | Y = y] = ∑ₓ x·pₓ|ᵧ(x | y)
```

**全期望定理**
```
E[X] = ∑ᵧ pᵧ(y)·E[X | Y = y]
```

---

### **2.7 隨機變數的獨立性**

**定義**
```
pₓ,ᵧ(x, y) = pₓ(x)·pᵧ(y)  對所有 x, y
```

**獨立時的性質**
```
E[XY] = E[X]·E[Y]
E[g(X)h(Y)] = E[g(X)]·E[h(Y)]
var(X + Y) = var(X) + var(Y)
```

---

### **2.8 常見離散分佈**

#### **1. 伯努利 (Bernoulli) - 參數 p**
```
pₓ(1) = p
pₓ(0) = 1-p

E[X] = p
var(X) = p(1-p)
```

#### **2. 二項式 (Binomial) - 參數 n, p**
```
pₓ(k) = C(n,k)·pᵏ·(1-p)ⁿ⁻ᵏ,  k = 0,1,...,n

E[X] = np
var(X) = np(1-p)
```

#### **3. 幾何 (Geometric) - 參數 p**
```
pₓ(k) = (1-p)ᵏ⁻¹·p,  k = 1,2,...

E[X] = 1/p
var(X) = (1-p)/p²
```

#### **4. 波松 (Poisson) - 參數 λ**
```
pₓ(k) = e⁻λ·λᵏ/k!,  k = 0,1,2,...

E[X] = λ
var(X) = λ
```

**波松近似二項式：** n 大、p 小時，np = λ

#### **5. 離散均勻 (Discrete Uniform) - [a,b]**
```
pₓ(k) = 1/(b-a+1),  k = a, a+1, ..., b

E[X] = (a+b)/2
var(X) = (b-a)(b-a+2)/12
```

---

## 📊 Chapter 3: General Random Variables

### **3.1 連續隨機變數與PDF**

**機率密度函數 (PDF) fₓ(x)**

**性質**
```
fₓ(x) ≥ 0
∫₋∞^∞ fₓ(x)dx = 1
```

**機率計算**
```
P(X ∈ B) = ∫_B fₓ(x)dx
P(a ≤ X ≤ b) = ∫ₐᵇ fₓ(x)dx
```

**小區間近似**
```
P([x, x+δ]) ≈ fₓ(x)·δ
```

---

### **3.2 累積分佈函數 (CDF)**

**定義**
```
Fₓ(x) = P(X ≤ x)
```

**性質**
- 單調遞增
- lim_{x→-∞} Fₓ(x) = 0
- lim_{x→∞} Fₓ(x) = 1

**離散情況**
```
Fₓ(k) = ∑ᵢ₌₋∞ᵏ pₓ(i)
pₓ(k) = Fₓ(k) - Fₓ(k-1)
```

**連續情況**
```
Fₓ(x) = ∫₋∞ˣ fₓ(t)dt
fₓ(x) = dFₓ/dx(x)
```

---

### **3.3 期望值與變異數**

**期望值**
```
E[X] = ∫₋∞^∞ x·fₓ(x)dx
```

**函數的期望值**
```
E[g(X)] = ∫₋∞^∞ g(x)·fₓ(x)dx
```

**變異數**
```
var(X) = E[(X - E[X])²]
       = ∫₋∞^∞ (x - E[X])²·fₓ(x)dx
       = E[X²] - (E[X])²
```

**線性變換**
```
若 Y = aX + b：
E[Y] = aE[X] + b
var(Y) = a²var(X)
```

---

### **3.4 常態分佈 (Normal Distribution)**

**N(μ, σ²)**
```
fₓ(x) = (1/√(2πσ²))·e^(-(x-μ)²/(2σ²))

E[X] = μ
var(X) = σ²
```

**標準常態 N(0,1)**
```
Φ(z) = P(Z ≤ z)
Φ(-z) = 1 - Φ(z)
```

**標準化**
```
若 X ~ N(μ, σ²)，則
Z = (X - μ)/σ ~ N(0, 1)

P(X ≤ x) = Φ((x-μ)/σ)
```

**線性變換保持常態性**
```
若 X ~ N(μ, σ²)，Y = aX + b
則 Y ~ N(aμ+b, a²σ²)
```

---

### **3.5 聯合PDF (Joint PDF)**

**定義**
```
P((X,Y) ∈ B) = ∫∫_B fₓ,ᵧ(x,y)dxdy
```

**邊際PDF**
```
fₓ(x) = ∫₋∞^∞ fₓ,ᵧ(x,y)dy
fᵧ(y) = ∫₋∞^∞ fₓ,ᵧ(x,y)dx
```

**聯合CDF**
```
Fₓ,ᵧ(x,y) = P(X ≤ x, Y ≤ y)
fₓ,ᵧ(x,y) = ∂²Fₓ,ᵧ/∂x∂y
```

**期望值**
```
E[g(X,Y)] = ∫∫ g(x,y)·fₓ,ᵧ(x,y)dxdy
E[aX + bY + c] = aE[X] + bE[Y] + c
```

---

### **3.6 條件PDF**

**定義**
```
fₓ|ᵧ(x | y) = fₓ,ᵧ(x,y) / fᵧ(y),  當 fᵧ(y) > 0
```

**關係式**
```
fₓ,ᵧ(x,y) = fᵧ(y)·fₓ|ᵧ(x | y)
fₓ(x) = ∫ fᵧ(y)·fₓ|ᵧ(x | y)dy
```

**條件期望**
```
E[X | Y = y] = ∫ x·fₓ|ᵧ(x | y)dx
E[g(X) | Y = y] = ∫ g(x)·fₓ|ᵧ(x | y)dx
```

**全期望定理**
```
E[X] = ∫ E[X | Y = y]·fᵧ(y)dy
```

---

### **3.7 獨立性**

**定義**
```
fₓ,ᵧ(x, y) = fₓ(x)·fᵧ(y)  對所有 x, y
```

**性質**
```
E[XY] = E[X]·E[Y]
E[g(X)h(Y)] = E[g(X)]·E[h(Y)]
var(X + Y) = var(X) + var(Y)
```

---

### **3.8 常見連續分佈**

#### **1. 均勻分佈 Uniform[a,b]**
```
fₓ(x) = 1/(b-a),  a ≤ x ≤ b

E[X] = (a+b)/2
var(X) = (b-a)²/12
```

#### **2. 指數分佈 Exponential(λ)**
```
fₓ(x) = λe^(-λx),  x ≥ 0
Fₓ(x) = 1 - e^(-λx),  x ≥ 0

E[X] = 1/λ
var(X) = 1/λ²
```

**無記憶性：** P(X > s+t | X > s) = P(X > t)

#### **3. 常態分佈 N(μ, σ²)**
```
fₓ(x) = (1/√(2πσ²))·e^(-(x-μ)²/(2σ²))

E[X] = μ
var(X) = σ²
```

---

### **3.9 貝氏法則（連續版）**

**四種情況：**

1. **Θ 離散, X 離散**
```
   pΘ|X(θ | x) = pΘ(θ)·pX|Θ(x | θ) / [∑θ' pΘ(θ')·pX|Θ(x | θ')]
```

2. **Θ 離散, X 連續**
```
   pΘ|X(θ | x) = pΘ(θ)·fX|Θ(x | θ) / [∑θ' pΘ(θ')·fX|Θ(x | θ')]
```

3. **Θ 連續, X 離散**
```
   fΘ|X(θ | x) = fΘ(θ)·pX|Θ(x | θ) / [∫ fΘ(θ')·pX|Θ(x | θ')dθ']
```

4. **Θ 連續, X 連續**
```
   fΘ|X(θ | x) = fΘ(θ)·fX|Θ(x | θ) / [∫ fΘ(θ')·fX|Θ(x | θ')dθ']
```

---

## 🔬 Chapter 4: Further Topics

### **4.1 導出分佈 (Derived Distributions)**

**方法：計算Y = g(X)的PDF**

1. 計算CDF：
```
   Fᵧ(y) = P(g(X) ≤ y) = ∫_{x:g(x)≤y} fₓ(x)dx
```

2. 微分得PDF：
```
   fᵧ(y) = dFᵧ/dy
```

**線性函數**
```
若 Y = aX + b, a ≠ 0：
fᵧ(y) = (1/|a|)·fₓ((y-b)/a)
```

**嚴格單調函數**
```
若 y = g(x) 且 x = h(y)：
fᵧ(y) = fₓ(h(y))·|dh/dy(y)|
```

---

### **4.2 共變異數與相關係數**

**共變異數**
```
cov(X,Y) = E[(X - E[X])(Y - E[Y])]
         = E[XY] - E[X]·E[Y]
```

**性質**
- 若 X, Y 獨立，則 cov(X,Y) = 0
- 反之不一定成立

**相關係數**
```
ρ(X,Y) = cov(X,Y) / (σₓ·σᵧ)
```

**範圍**
```
-1 ≤ ρ(X,Y) ≤ 1
```

**變異數加法**
```
var(X + Y) = var(X) + var(Y) + 2cov(X,Y)
```

---

### **4.3 條件期望與變異數的性質**

**E[X | Y]是隨機變數**
- 是 Y 的函數
- 當 Y = y 時，值為 E[X | Y = y]

**迭代期望定理**
```
E[E[X | Y]] = E[X]
```

**估計誤差**
```
E[X | Y] - X 具有：
- 零均值
- 與 E[X | Y] 不相關
```

**全變異數定理**
```
var(X) = E[var(X | Y)] + var(E[X | Y])
```

---

### **4.4 變換 (Transforms)**

**定義**
```
Mₓ(s) = E[e^(sX)]
```

**離散**
```
Mₓ(s) = ∑ₓ e^(sx)·pₓ(x)
```

**連續**
```
Mₓ(s) = ∫ e^(sx)·fₓ(x)dx
```

**性質**

1. **生成動差**
```
   Mₓ(0) = 1
   dMₓ/ds|ₛ₌₀ = E[X]
   d²Mₓ/ds²|ₛ₌₀ = E[X²]
   dⁿMₓ/dsⁿ|ₛ₌₀ = E[Xⁿ]
```

2. **線性變換**
```
   若 Y = aX + b：
   Mᵧ(s) = e^(sb)·Mₓ(as)
```

3. **獨立和**
```
   若 X, Y 獨立：
   Mₓ₊ᵧ(s) = Mₓ(s)·Mᵧ(s)
```

---

### **4.5 隨機個數的和**

**設定：Y = X₁ + ... + Xₙ**
- X₁, X₂, ... i.i.d.
- N 為隨機變數
- N 與所有 Xᵢ 獨立

**期望值**
```
E[Y] = E[N]·E[X]
```

**變異數**
```
var(Y) = E[N]·var(X) + (E[X])²·var(N)
```

**變換**
```
Mᵧ(s) = Mₙ(log Mₓ(s))